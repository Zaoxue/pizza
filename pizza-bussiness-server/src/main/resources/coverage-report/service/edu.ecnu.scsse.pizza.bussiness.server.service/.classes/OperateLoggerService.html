


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html id="htmlId">
<head>
  <title>Coverage Report :: OperateLoggerService</title>
  <style type="text/css">
    @import "../../.css/coverage.css";
  </style>
</head>

<body>
<div class="header"></div>

<div class="content">
<div class="breadCrumbs">
    [ <a href="../../service/index.html">all classes</a> ]
    [ <a href="../index.html">edu.ecnu.scsse.pizza.bussiness.server.service</a> ]
</div>

<h1>Coverage Summary for Class: OperateLoggerService (edu.ecnu.scsse.pizza.bussiness.server.service)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">OperateLoggerService</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (4/ 4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (20/ 20)
  </span>
</td>
</tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1015629207</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1015629207$auxiliary$2OnYzR2V</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1015629207$auxiliary$FxwgPyY5</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1015629207$auxiliary$HEMGzqwG</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1015629207$auxiliary$LC5IOwsZ</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1015629207$auxiliary$lyjukUjb</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1693856640</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1693856640$auxiliary$eIYrvChk</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1693856640$auxiliary$OoZUInLA</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1693856640$auxiliary$QfdXulFY</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1693856640$auxiliary$qXkEjfXJ</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1693856640$auxiliary$tkVscUd1</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$189223858</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$189223858$auxiliary$16sJQWRM</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$189223858$auxiliary$6y9IYKQH</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$189223858$auxiliary$Jezh5LFm</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$189223858$auxiliary$roX999LU</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$189223858$auxiliary$Wl8Ry8fH</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1999547846</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1999547846$auxiliary$c02uFJP9</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1999547846$auxiliary$cNUJaTSg</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1999547846$auxiliary$DMNnXdSu</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1999547846$auxiliary$ltdaNlOm</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$1999547846$auxiliary$oXsoYwlT</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$2068591202</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$2068591202$auxiliary$0ZaAWRzw</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$2068591202$auxiliary$ACcF6K4D</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$2068591202$auxiliary$GPq73pSs</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$2068591202$auxiliary$q6OkPfrh</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$2068591202$auxiliary$WOfs1X7A</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$244759763</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$244759763$auxiliary$bNfY6Eqt</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$244759763$auxiliary$ddnZHMeQ</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$244759763$auxiliary$RKQamxK3</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$244759763$auxiliary$VurlZrWN</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$244759763$auxiliary$y4NfaViv</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$950671177</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$950671177$auxiliary$czHYA6a3</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$950671177$auxiliary$OCYnAyld</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$950671177$auxiliary$Qi9e4qP5</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$950671177$auxiliary$WCZSNL3B</td>
  </tr>
  <tr>
    <td class="name">OperateLoggerService$MockitoMock$950671177$auxiliary$XUsSRA2j</td>
  </tr>
<tr>
  <td class="name"><strong>total</strong></td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (4/ 4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (20/ 20)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<div class="sourceCode"><i>1</i>&nbsp;package edu.ecnu.scsse.pizza.bussiness.server.service;
<i>2</i>&nbsp;
<i>3</i>&nbsp;import edu.ecnu.scsse.pizza.bussiness.server.model.entity.Logger;
<i>4</i>&nbsp;import edu.ecnu.scsse.pizza.bussiness.server.utils.CopyUtils;
<i>5</i>&nbsp;import edu.ecnu.scsse.pizza.data.domain.OperateLoggerEntity;
<i>6</i>&nbsp;import edu.ecnu.scsse.pizza.data.repository.OperateLoggerJpaRepository;
<i>7</i>&nbsp;import org.springframework.beans.factory.annotation.Autowired;
<i>8</i>&nbsp;import org.springframework.stereotype.Service;
<i>9</i>&nbsp;
<i>10</i>&nbsp;import java.sql.Timestamp;
<i>11</i>&nbsp;import java.text.DateFormat;
<i>12</i>&nbsp;import java.text.SimpleDateFormat;
<i>13</i>&nbsp;import java.time.Clock;
<i>14</i>&nbsp;import java.util.ArrayList;
<i>15</i>&nbsp;import java.util.Date;
<i>16</i>&nbsp;import java.util.List;
<i>17</i>&nbsp;import java.util.stream.Collectors;
<i>18</i>&nbsp;
<i>19</i>&nbsp;@Service
<b class="fc"><i>20</i>&nbsp;public class OperateLoggerService extends SessionService{</b>
<i>21</i>&nbsp;    @Autowired
<i>22</i>&nbsp;    OperateLoggerJpaRepository operateLoggerJpaRepository;
<i>23</i>&nbsp;
<i>24</i>&nbsp;    /**
<i>25</i>&nbsp;     * ��ӹ���Ա������־
<i>26</i>&nbsp;     * */
<i>27</i>&nbsp;    void addOperateLogger(String type, String object, String result){
<b class="fc"><i>28</i>&nbsp;        OperateLoggerEntity logger = new OperateLoggerEntity();</b>
<b class="fc"><i>29</i>&nbsp;        logger.setOperateType(type);</b>
<b class="fc"><i>30</i>&nbsp;        Date date = new Date();</b>
<b class="fc"><i>31</i>&nbsp;        SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</b>
<b class="fc"><i>32</i>&nbsp;        String dateStr = df.format(date);</b>
<b class="fc"><i>33</i>&nbsp;        Timestamp ts = Timestamp.valueOf(dateStr);</b>
<b class="fc"><i>34</i>&nbsp;        logger.setOperateTime(new Timestamp(ts.getTime()));</b>
<b class="fc"><i>35</i>&nbsp;        logger.setAdminId(getAdminId());</b>
<b class="fc"><i>36</i>&nbsp;        logger.setOperateDetail(type+object+result);</b>
<b class="fc"><i>37</i>&nbsp;        operateLoggerJpaRepository.save(logger);</b>
<b class="fc"><i>38</i>&nbsp;    }</b>
<i>39</i>&nbsp;
<i>40</i>&nbsp;    public List&lt;Logger&gt; getOperateLogger(){
<b class="fc"><i>41</i>&nbsp;        List&lt;OperateLoggerEntity&gt; operateLoggerEntityList = operateLoggerJpaRepository.findAll();</b>
<b class="fc"><i>42</i>&nbsp;        return operateLoggerEntityList.stream().map(this::convert).collect(Collectors.toList());</b>
<i>43</i>&nbsp;    }
<i>44</i>&nbsp;
<i>45</i>&nbsp;    private Logger convert(OperateLoggerEntity entity){
<b class="fc"><i>46</i>&nbsp;        Logger logger = new Logger();</b>
<b class="fc"><i>47</i>&nbsp;        CopyUtils.copyProperties(entity,logger);</b>
<i>48</i>&nbsp;
<b class="fc"><i>49</i>&nbsp;        String commitTimePattern = &quot;yyyy/MM/dd hh:MM:ss&quot;;</b>
<b class="fc"><i>50</i>&nbsp;        DateFormat df = new SimpleDateFormat(commitTimePattern);</b>
<b class="fc"><i>51</i>&nbsp;        logger.setOperateTime(df.format(entity.getOperateTime()));</b>
<b class="fc"><i>52</i>&nbsp;        return logger;</b>
<i>53</i>&nbsp;    }
<i>54</i>&nbsp;}
</div>
</div>

<div class="footer">
    
    <div style="float:right;">generated on 2019-04-08 02:13</div>
</div>
</body>
</html>
